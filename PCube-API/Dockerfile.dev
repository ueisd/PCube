FROM python:3
WORKDIR /app
RUN apt update && apt install sqlite3
COPY . .
RUN python3 -m venv env
RUN pip install --upgrade pip
RUN pip install -r requirements.txt
RUN rm -f database/pcube.db 2> /dev/null
RUN	sqlite3 database/pcube.db < database/pcube.sql
RUN	sqlite3 database/pcube.db < database/data_generation.sql
CMD [ "python3", "-m" , "flask", "run", "--host=0.0.0.0", "-p", "80"]