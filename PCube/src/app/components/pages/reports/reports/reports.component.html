<div fxLayout.xs="column">
    <mat-card fxflex fxflex-gt-xs="100" fxFlexOffset="2" fxFlex="20">
        <mat-card-header>
            <mat-card-title><h2>Affichage du rapport</h2></mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <div>
                {{ afficherPeriodes() }}
            </div>
            <div *ngIf="reportRequest.activitys.length > 0">
                activit√©s:
                <div *ngFor="let activity of reportRequest.activitys">
                    {{ activity.name }}
                </div>
            </div>
            <div *ngIf="reportRequest.users.length > 0">
                utilisateurs:
                <div *ngFor="let user of reportRequest.users">
                    {{ user.display_string }}
                </div>
            </div>
            <div *ngIf="reportRequest.projects.length > 0">
                projets:
                <div *ngFor="let project of reportRequest.projects">
                    {{ project.name }}
                </div>
            </div>


            <mat-tree [dataSource]="dataSource" [treeControl]="treeControl">
                <mat-tree-node *matTreeNodeDef="let node" matTreeNodePadding>
                    <div class="container width100">
                        <div fxflex fxFlex="70%">
                            {{node.name}}
                        </div>
                        <div fxflex fxFlex="30%" fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="5px">
                            {{ (node.sommeHeure) ? heureSommeToStr(node.sommeHeure) : '0h00' }}
                        </div>  
                    </div>
                </mat-tree-node>
                <mat-tree-node *matTreeNodeDef="let node;when: hasChild" matTreeNodePadding>
                    <div class="container width100">
                        <div fxflex fxFlex="70%">
                            <button mat-icon-button matTreeNodeToggle
                            [attr.aria-label]="'toggle ' + node.name">
                                <mat-icon class="mat-icon-rtl-mirror">
                                    {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
                                </mat-icon>
                            </button>
                            {{node.name}}
                        </div>
                        <div fxflex fxFlex="30%" fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="5px">
                            {{ (node.sommeHeure) ? heureSommeToStr(node.sommeHeure) : '0h00' }}
                        </div>
                    </div>
                </mat-tree-node>
            </mat-tree>      
        </mat-card-content>
    </mat-card>
</div>

